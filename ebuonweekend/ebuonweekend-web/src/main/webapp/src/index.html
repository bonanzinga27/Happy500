<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Webapp</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <!-- Material Design icon -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Custom css dell'intero sito -->
  <link href="styles.css" rel="stylesheet">

  <script src="jquery-3.1.1.min.js"></script>
  <link href="bootstrap.min.css" rel="stylesheet">
  <script src="bootstrap.min.js"></script>
  <script src="jspdf.debug.js"></script>
  <script src="jspdf.js"></script>
  <script src="from_html.js"></script>
  <script src="split_text_to_size.js"></script>
  <script src="standard_fonts_metrics.js"></script>

  <script>

    var wkhtmltopdf = require('wkhtmltopdf');
    module.exports = function(PDF) {
      PDF.print = function(req, res, done) {
        var html = req.body.html;
        var projectLocation = __dirname + '/../../';
        console.log(projectLocation);
        var CSSLocation = projectLocation + 'client/www/style/' + 'main.css';
        var wkBinPath = projectLocation + 'bin/wkhtmltopdf';
        wkhtmltopdf.command = wkBinPath;
        var options = { 'user-style-sheet': CSSLocation, };
        var stream = wkhtmltopdf(html, options);
        done;
      }
    }


    function pdfPrint(id) {


    console.log("pdf test");
    var doc = new jsPDF();
    var elementHandler = {
      '#ignorePDF': function (element, renderer) {
        return true;
      }
    };
    var source = window.document.getElementById(id);
    doc.fromHTML(
      source,
      15,
      15,
      {
        'width': 180,'elementHandlers': elementHandler
      });

    doc.output("dataurlnewwindow");
    }
  </script>
<button id="bottoneTest" onclick="pdfPrint('idTest')" > Clickme</button>

</head>
<body class="backgroudApp">
  <app-root>Loading...</app-root>
</body>
</html>
